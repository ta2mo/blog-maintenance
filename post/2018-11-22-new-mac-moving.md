---
layout: post
title: Macの移行アシスタントつかったらgo buildできなくなった
date: 2018-11-22 00:00:00 +0900
comments: true
categories: Tech
tags: Mac, Tips
---

<!-- write here ↓ -->

## 経緯

タイトルの通りなんですが現場でiMacからMacbookProへ移行することがあり、移行アシスタントを使って移行したのですが `go build` できなくなって困った話です。
移行元/移行先マシンのmacOSはMojave(10.14.1)でした。

#### エラーログ

`go: creating work dir: stat /var/folders/21/8v28hvm53zb1gmc_h73ywp580000gn/T/: no such file or directory`

`go build` したところ上記エラーが出ました。エラーログに記述されているディレクトリを確認してみると、ディレクトリは存在しておりユーザも自分のアカウント名になっていました。
困ったのでいろいろ試してみました。

## やってみたこと

- golangの再インストール(もともとはインストーラーでインストールされていた)
    - brew経由でインストールしてみる →解決せず...
    - インストーラーで再度インストール →解決せず...
    - gvm →そもそもgvmが同様のエラー表示で導入できず...
- ユーザーIDの変更
    - 移行後のユーザIDが移行前と違っていたので変更してみた
    - システム環境設定→ユーザとグループ→詳細オプションでユーザーIDのを確認&変更
        - 問題は解決せず。さらにアプリケーションが立ち上がらないなど他の問題もでた
- 移行先Macのクリーンインストールからの移行アシスタントで移行
    - *成功!!*

## まとめ

- 移行アシスタントは賢いが、無用なトラブルを避けるためにはMacが未設定状態でやるのがベスト
- そもそも移行アシスタントを使わなくても同じ状態にセットアップできる仕組みをつくっておけばよかった

<!-- write here ↑ -->
